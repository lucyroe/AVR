
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://lucyroe.github.io/AVR/code/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../publications/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Code - AVR Embodied Emotion Code Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#affectivevr-code" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="AVR Embodied Emotion Code Documentation" class="md-header__button md-logo" aria-label="AVR Embodied Emotion Code Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AVR Embodied Emotion Code Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Code
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Code

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../publications/" class="md-tabs__link">
        
  
    
  
  Publications

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../results/" class="md-tabs__link">
        
  
    
  
  Results

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="AVR Embodied Emotion Code Documentation" class="md-nav__button md-logo" aria-label="AVR Embodied Emotion Code Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AVR Embodied Emotion Code Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Code
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Code
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preprocessing" class="md-nav__link">
    <span class="md-ellipsis">
      Preprocessing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preprocessing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#annotation" class="md-nav__link">
    <span class="md-ellipsis">
      Annotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physiological" class="md-nav__link">
    <span class="md-ellipsis">
      Physiological
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Physiological">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ecg" class="md-nav__link">
    <span class="md-ellipsis">
      ECG
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg" class="md-nav__link">
    <span class="md-ellipsis">
      EEG
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modelling" class="md-nav__link">
    <span class="md-ellipsis">
      Modelling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Statistics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Data Comparison
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      Data Visualization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codebase" class="md-nav__link">
    <span class="md-ellipsis">
      Codebase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Codebase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configs" class="md-nav__link">
    <span class="md-ellipsis">
      Configs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      LICENSE
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../publications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publications
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Results
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="affectivevr-code">AffectiveVR – <strong>code</strong></h1>
<div class="highlight"><pre><span></span><code>Last update:    September 16, 2024
Status:         completed
</code></pre></div>
<hr />
<h2 id="description">Description</h2>
<p>The whole preprocessing and analysis pipeline can be followed by running <code>main.py</code>.  </p>
<p>The main analysis method used in this project is <strong>Hidden Markov Models (HMMs)</strong>. A Hidden Markov Model (HMM) is a data-driven generative statistical model that can be used to identify hidden states in dynamically changing systems, e.g., the brain or the heart (<a href="https://www.sciencedirect.com/science/article/abs/pii/S1566253520304140?via%3Dihub">Khalifa et al., 2021</a>; <a href="https://www.frontiersin.org/article/10.3389/fnins.2018.00603/full">Quinn et al., 2018</a>). The hidden states are mutually exclusive, such that only one state occurs at any one point in time, and Markovian, such that one state is only dependent on the previous state. Each state has an initial probability 𝝅. As the states are hidden and cannot be observed directly in the data, observation models (or emission probabilities, 𝜽) link the data with each hidden state, representing the probability distribution from which the data is drawn while the state is active. Transitions between the states are represented in the transition probability matrix A. Given only a set of observations X, the Baum-Welch algorithm can be used to iteratively compute a set of model parameters λ = (𝝅, A, 𝜽) using both forward and Viterbi algorithms based on the expectation-maximization method. The such identified states can then be compared across different models or conditions.</p>
<p>HMMs were implemented in this project using the Python package <code>hmmlearn</code> (<a href="https://hmmlearn.readthedocs.io/en/latest/index.html">version 0.3.2</a>).</p>
<p><img alt="HMM" src="../publications/thesis/figures/phase3_hmm.png" /></p>
<h2 id="preprocessing">Preprocessing</h2>
<p>The script <code>read_xdf.py</code> reads in all data from the LSL-output format <code>.xdf</code>, allows for manual checks, and converts it into BIDS-compatible files and folder structure. <br />
Two different directories exist for the preprocessing of annotation (<code>./code/AVR/preprocessing/annotation</code>) and physiological data (<code>./code/AVR/preprocessing/physiological</code>).</p>
<div class="highlight"><pre><span></span><code> 📂 preprocessing
 ├── 📁 annotation
 │   ├── 🐍 preprocessing_annotation_avr_phase1.py
 │   ├── 🐍 preprocessing_annotation_avr_phase2.py
 │   └── 🐍 preprocessing_annotation_avr_phase3.py
 └── 📁 physiological
     ├── 🐍 preprocessing_physiological_avr_phase3.py
     ├── 🐍 preprocessing_metadata.py
     ├── 🐍 bad_after_cleaning_check.py
     └── 🐍 feature_extraction.py
</code></pre></div>
<h3 id="annotation">Annotation</h3>
<p><strong>Preprocessing of annotation data</strong> consists of these steps (for phase 3; for phase 1+2, see respective scripts):</p>
<ol>
<li><strong>Cropping</strong> 2.5 seconds at the start and end of the data to avoid edge artifacts.   </li>
<li><strong>Downsampling</strong> to 1 Hz.   </li>
<li><strong>Interpolating</strong> missing values linearly so the data of all participants has the same shape.   </li>
</ol>
<h3 id="physiological">Physiological</h3>
<h4 id="ecg">ECG</h4>
<p><strong>Preprocessing of ECG data</strong> consists of these steps:  </p>
<ol>
<li><strong>Cropping</strong> 2.5 seconds at the start and end of the data to avoid edge artifacts.  </li>
<li><strong>Cleaning</strong>: 50 Hz power line noise removal, Band-pass filtering between 0.5 and 30 Hz.</li>
<li><strong>R-Peak Detection</strong>: Automated R-Peak Detection using <code>neurokit2</code> (<a href="https://neurokit2.readthedocs.io/en/legacy_docs/">Open Source Python Toolbox</a>), manual check of detected R-peaks in interactive window.</li>
<li><strong>IBI Calculation</strong></li>
</ol>
<p><strong>Feature extraction of ECG data</strong> consists of these steps:  </p>
<ol>
<li><strong>Resampling</strong> to 4 Hz.</li>
<li><strong>Symmetric Padding</strong> of 90 seconds mirrored data to the start and end of the data.</li>
<li><strong>Continuous Wavelet Transform (CWT)</strong> using <code>fCWT</code> (<a href="https://github.com/fastlib/fCWT">Python Library</a>) to get the <strong>Time Frequency Representation (TFR)</strong>.</li>
<li><strong>Averaging</strong> over 2s windows with 50% overlap.</li>
<li><strong>Integrating</strong> over frequency bands to get low-frequency (LF-) and high-frequency (HF-) heart rate variability (HRV).</li>
</ol>
<h4 id="eeg">EEG</h4>
<p><strong>Preprocessing of EEG data</strong> consists of these steps: </p>
<ol>
<li><strong>Cropping</strong> 2.5 seconds at the start and end of the data to avoid edge artifacts.  </li>
<li><strong>Cleaning</strong>: 50 Hz power line noise removal, re-referencing to average, band-pass filtering between 0.1 and 45 Hz, segmenting into epochs of 10s length, rejection or interpolation of bad channels and epochs using <code>autoreject</code> on 1 Hz-filtered data.</li>
<li><strong>Independent Component Analysis (ICA)</strong> to identify eye, cardiac, and muscle artifacts.</li>
<li><strong>Final threshold check</strong> to exclude any participants with more than 30% of remaining noisy epochs.</li>
</ol>
<p><strong>Feature extraction of EEG data</strong> consists of these steps:  </p>
<ol>
<li><strong>Resampling</strong> to 100 Hz.</li>
<li><strong>Symmetric Padding</strong> of 90 seconds mirrored data to the start and end of the data.</li>
<li><strong>Continuous Wavelet Transform (CWT)</strong> using <code>fCWT</code> (<a href="https://github.com/fastlib/fCWT">Python Library</a>) to get the <strong>Time Frequency Representation (TFR)</strong>.</li>
<li><strong>Averaging</strong> over 2s windows with 50% overlap.</li>
<li><strong>Integrating</strong> over frequency bands to get alpha, beta, gamma, delta and theta power values.</li>
<li><strong>Averaging</strong> across regions of interest (ROIs): posterior, frontal, whole-brain.</li>
</ol>
<p><img alt="Preprocessing" src="../publications/thesis/figures/phase3_preprocessing.png" /></p>
<h2 id="modelling">Modelling</h2>
<p>In (<code>./code/AVR/modelling</code>) you can find one script that performs a Hidden Markov Model (HMM) analysis on the data from the Physio phase of the AVR project (<code>hmm.py</code>) and one script that compares the five models trained in the previous script in terms of their performance in decoding hidden affective states (<code>compare_models.py</code>).</p>
<div class="highlight"><pre><span></span><code> 📂 modelling
 ├── 🐍 compare_models.py
 └── 🐍 hmm.py
</code></pre></div>
<p>Read the first paragraph of this README to learn about HMM. The five models trained in this thesis are:</p>
<ul>
<li>A <strong>cardiac</strong> model, trained only on IBI &amp; HF-HRV.</li>
<li>A <strong>neural</strong> model, trained on posterior alpha, frontal alpha, frontal theta, whole-brain gamma &amp; whole-brain beta.</li>
<li>An <strong>integrated</strong> model, trained on all seven of these features.</li>
<li>A <strong>multimodal</strong> model, trained on the seven physiological features and the rating data.</li>
<li>A <strong>subjective</strong> model, trained only on the rating data.</li>
</ul>
<p>The models are then compared in terms of...</p>
<ul>
<li>The general model quality (log-likelihood, AIC, BIC).</li>
<li>The model's accuracy (correlation with subjective model &amp; fraction of corresponding states).</li>
<li>The distance between the model's states and the states identified by the subjective model.</li>
</ul>
<h2 id="statistics">Statistics</h2>
<p>In (<code>./code/AVR/statistics</code>) you can find one script that calculates univariate statistics for differences in features between different videos (<code>univariate_statistics.py</code>), one script that calculates statistics for differences in features between different hidden states (<code>hmm_stats.py</code>) and one script that fits a general linear model (GLM) to the hidden states as identified in each HMM to test the states for significance (<code>glm.py</code>).</p>
<div class="highlight"><pre><span></span><code> 📂 statistics
 ├── 🐍 univariate_statistics.py
 ├── 🐍 glm.py
 └── 🐍 hmm_stats.py
</code></pre></div>
<h2 id="data-comparison">Data Comparison</h2>
<p>In (<code>./code/AVR/datacomparison</code>) you can find scripts to compare the variability in ratings between the Selection Phase and the Evaluation/Physio Phase of the project AVR, respectively.</p>
<div class="highlight"><pre><span></span><code> 📂 datacomparison
 ├── 🐍 compare_variability_phase1_phase2.py
 └── 🐍 compare_variability_phase1_phase3.py
</code></pre></div>
<h2 id="data-visualization">Data Visualization</h2>
<p>In (<code>./code/AVR/datavisualization</code>) you can find scripts for visualizing the results. <code>radar_plot.py</code>creates a radar plot to visualize AVR questionnaire data from the Selection phase. <code>raincloud_plot.py</code> creates raincloud plots to visualize the difference in variability between the Selection phase and the Evaluation/Physio phase. <code>plot_descriptives.py</code>plots the mean ratings, cardiac and neural features of the Physio phase across time. And <code>plot_hidden_states.py</code>creates plots of the differences of the features between the hidden states as identified by each of the four HMMs.</p>
<div class="highlight"><pre><span></span><code> 📂 datavisualization
 ├── 🐍 plot_descriptives.py
 ├── 🐍 plot_hidden_states.py
 ├── 🐍 radar_plot.py
 └── 🐍 raincloud_plot.py
</code></pre></div>
<h2 id="codebase">Codebase</h2>
<p>All code is written in Python 3.11. See below on how to install the code as a python package.</p>
<h3 id="python">Python</h3>
<p>Python code (in the structure of a python package) is stored in <code>./code/AVR/</code></p>
<p>To install the research code as package, run the following code in the project root directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[develop]&quot;</span>
</code></pre></div>
<h3 id="configs">Configs</h3>
<p>Paths to data, parameter settings, etc. are stored in the config file: <code>./code/configs/config.toml</code></p>
<p>Private config files that contain, e.g., passwords, and therefore should not be shared,
or mirrored to a remote repository can be listed in: <code>./code/configs/private_config.toml</code></p>
<p>Both files will be read out by the script in <code>./code/AVR/configs.py</code>.
Keep both config toml files and the script in the places, where they are.</p>
<p>To use your configs in your python scripts, do the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">AVR.configs</span> <span class="kn">import</span> <span class="n">config</span><span class="p">,</span> <span class="n">paths</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># check out which paths are set in config.toml</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">paths</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># get the path to data</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">path_to_data</span> <span class="o">=</span> <span class="n">paths</span><span class="o">.</span><span class="n">DATA</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1"># Get parameter from config</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="n">weight_decay</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">weight_decay</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="c1"># Get private parameter from config</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="n">api_key</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">service_x</span><span class="o">.</span><span class="n">api_key</span>
</code></pre></div>
<p><em>Fill the corresponding <code>*config.toml</code> files with your data.</em></p>
<p>For other programming languages, corresponding scripts must be implemented to use these <code>*config.toml</code> files in a similar way.</p>
<h2 id="license">LICENSE</h2>
<p>MIT</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/lucyroe"  target="_blank" rel="noopener">Lucy Roellecke</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>